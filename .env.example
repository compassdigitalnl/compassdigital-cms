# ==============================================================================
# üöÄ SITEFORGE - ENVIRONMENT CONFIGURATION
# ==============================================================================
# Complete environment variable configuration for production deployment
# Last updated: February 2026
#
# Quick Start:
# 1. Copy this file: cp .env.example .env
# 2. Fill in REQUIRED variables (marked with ‚ö†Ô∏è)
# 3. Configure RECOMMENDED variables (marked with ‚úÖ)
# 4. Optional variables can be left empty
#
# ==============================================================================


# ==============================================================================
# ‚ö†Ô∏è CORE - REQUIRED FOR ALL ENVIRONMENTS
# ==============================================================================

# Payload CMS Secret Key (REQUIRED)
# Generate with: openssl rand -base64 32
# Used for: JWT tokens, encryption, session management
PAYLOAD_SECRET=your-secret-key-here-change-in-production

# Database Configuration
# Development: Use SQLite (file-based, zero config)
DATABASE_URL=file:./payload.db

# Production: Use PostgreSQL (REQUIRED for production!)
# Choose one provider below and uncomment:

# Option A: Railway ($5/month) - Simplest setup
# DATABASE_URL=postgresql://postgres:password@containers-us-west-123.railway.app:5432/railway

# Option B: Supabase (Free tier available) - Best for scale
# DATABASE_URL=postgresql://postgres:[YOUR-PASSWORD]@db.yourproject.supabase.co:6543/postgres?pgbouncer=true

# Option C: Vercel Postgres ($20/month) - Best if using Vercel hosting
# DATABASE_URL=postgres://default:password@ep-cool-darkness-123456.us-east-1.postgres.vercel-storage.com:5432/verceldb

# Server URLs
# Development
PAYLOAD_PUBLIC_SERVER_URL=http://localhost:3020
NEXT_PUBLIC_SERVER_URL=http://localhost:3020

# Production (Update with your domain!)
# PAYLOAD_PUBLIC_SERVER_URL=https://yourdomain.com
# NEXT_PUBLIC_SERVER_URL=https://yourdomain.com

# Platform Multi-Tenant Configuration
# Base domain for client subdomains (e.g., "yourplatform.com" ‚Üí client1.yourplatform.com)
# Development: Use main domain
PLATFORM_BASE_URL=yourdomain.com
# Production example:
# PLATFORM_BASE_URL=compassdigital.nl

# Preview/Draft Mode Secret
# Generate with: openssl rand -base64 32
PREVIEW_SECRET=your-preview-secret-here


# ==============================================================================
# ‚úÖ INTEGRATIONS - RECOMMENDED FOR PRODUCTION
# ==============================================================================

# ------------------------------------------------------------------------------
# Google Analytics 4 (RECOMMENDED - Free)
# ------------------------------------------------------------------------------
# Get from: https://analytics.google.com
# Format: G-XXXXXXXXXX
# Note: Only loads in production (NODE_ENV=production)
NEXT_PUBLIC_GA_ID=

# ------------------------------------------------------------------------------
# Sentry Error Tracking (RECOMMENDED - Free tier: 5k errors/month)
# ------------------------------------------------------------------------------
# Get from: https://sentry.io
# 1. Create account ‚Üí Create Next.js project
# 2. Copy DSN from Project Settings ‚Üí Client Keys (DSN)
# 3. Get ORG from Settings ‚Üí Organization Settings
# 4. Get PROJECT from Project Settings ‚Üí General
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_ORG=
SENTRY_PROJECT=

# Sentry Auth Token (for source maps upload)
# Get from: Settings ‚Üí Account ‚Üí API ‚Üí Auth Tokens
# Scopes needed: project:releases, project:write
# SENTRY_AUTH_TOKEN=

# ------------------------------------------------------------------------------
# Email Service - Resend (RECOMMENDED - 100 emails/day free)
# ------------------------------------------------------------------------------
# Get API key from: https://resend.com/api-keys
# Free tier: 100 emails/day, 3,000 emails/month
RESEND_API_KEY=
CONTACT_EMAIL=info@yourdomain.com
FROM_EMAIL=noreply@yourdomain.com

# ------------------------------------------------------------------------------
# reCAPTCHA v3 Spam Protection (RECOMMENDED - Free)
# ------------------------------------------------------------------------------
# Setup: https://www.google.com/recaptcha/admin/create
# Select: reCAPTCHA v3
# Add domains: yourdomain.com + localhost (for testing)
#
# Site Key: Public, used in frontend
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI

# Secret Key: Private, server-side only
RECAPTCHA_SECRET_KEY=6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe

# ‚ö†Ô∏è Note: Keys above are Google's TEST keys for development
# They always return valid response - replace with your real keys in production!

# ------------------------------------------------------------------------------
# Stripe Payment (Optional - for e-commerce)
# ------------------------------------------------------------------------------
# Get from: https://dashboard.stripe.com/apikeys
# Fee: 1.5% + ‚Ç¨0.25 per transaction (EU cards)

# Test Keys (Development)
STRIPE_SECRET_KEY=sk_test_
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_
STRIPE_WEBHOOKS_SIGNING_SECRET=whsec_

# Live Keys (Production)
# STRIPE_SECRET_KEY=sk_live_
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_
# STRIPE_WEBHOOKS_SIGNING_SECRET=whsec_


# ==============================================================================
# ü§ñ AI CONFIGURATION - Content Generation
# ==============================================================================

# ------------------------------------------------------------------------------
# OpenAI API (PRIMARY - REQUIRED for AI features)
# ------------------------------------------------------------------------------
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...your-openai-api-key...
AI_MODEL=gpt-4-turbo-preview
AI_IMAGE_MODEL=dall-e-3

# OpenAI Configuration
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=60000

# ------------------------------------------------------------------------------
# Future: Multi-Model Support (Week 5+)
# ------------------------------------------------------------------------------
# Anthropic Claude (Alternative/Fallback)
# Get API key from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-...your-anthropic-api-key...
# ANTHROPIC_MODEL=claude-3-opus-20240229
# ANTHROPIC_MAX_TOKENS=4000

# Google Gemini (Alternative/Fallback)
# Get API key from: https://makersuite.google.com/app/apikey
# GOOGLE_AI_API_KEY=...your-google-ai-api-key...
# GOOGLE_AI_MODEL=gemini-pro
# GOOGLE_AI_MAX_TOKENS=4000


# ==============================================================================
# üóÑÔ∏è REDIS - Caching & Queue (REQUIRED for production performance)
# ==============================================================================

# ------------------------------------------------------------------------------
# Local Development Redis
# ------------------------------------------------------------------------------
# Install: brew install redis
# Start: redis-server
# No password needed for local dev
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ------------------------------------------------------------------------------
# Production - Upstash Redis (RECOMMENDED - Global Edge Caching)
# ------------------------------------------------------------------------------
# Get credentials from: https://upstash.com
# Free tier: 10k commands/day
# Uncomment for production:
# UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your-token-here


# ==============================================================================
# üé® SITE BRANDING & META
# ==============================================================================

# Site Information (used in meta tags, OG images, emails)
COMPANY_NAME="Your Company"
SITE_NAME="Your Site Name"
TWITTER_CREATOR="@yourhandle"
TWITTER_SITE="https://twitter.com/yourhandle"


# ==============================================================================
# üîí SECURITY & PERFORMANCE
# ==============================================================================

# Node Environment
NODE_ENV=development

# CORS Settings (Production)
# Comma-separated list of allowed origins
# Leave empty for development (allows all origins)
# CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com
CORS_ORIGIN=

# Rate Limiting
# Configured in middleware (src/middleware.ts)
# - API endpoints: 100 requests per 15 minutes
# - Contact form: 5 submissions per hour
# - AI endpoints: 10 requests per minute
#
# For production multi-instance deployments:
# REDIS_RATE_LIMIT_ENABLED=true

# Security Headers (automatically configured):
# - X-Frame-Options: SAMEORIGIN
# - X-Content-Type-Options: nosniff
# - X-XSS-Protection: 1; mode=block
# - Strict-Transport-Security (production only)
# - Content-Security-Policy
# - Permissions-Policy


# ==============================================================================
# üìä AI PERFORMANCE - Caching & Rate Limiting
# ==============================================================================

# Cache TTL (Time To Live) - in seconds
# PERMANENT: Completed analyses, published content (90 days)
CACHE_TTL_PERMANENT=7776000

# STABLE: Templates, reference data (7 days)
CACHE_TTL_STABLE=604800

# DYNAMIC: Fresh content, translations (1 hour)
CACHE_TTL_DYNAMIC=3600

# REALTIME: Live generation (15 minutes)
CACHE_TTL_REALTIME=900

# AI Rate Limiting
AI_RATE_LIMIT_PER_MINUTE=50
AI_MAX_CONCURRENT_JOBS=5
AI_REQUEST_TIMEOUT=120000

# Cache Strategy
CACHE_ENABLED=true
CACHE_HIT_RATE_TARGET=95


# ==============================================================================
# üîÑ BULLMQ - Job Queue Configuration
# ==============================================================================

# Queue Concurrency (workers per queue)
QUEUE_CONTENT_ANALYSIS_CONCURRENCY=3
QUEUE_SEO_ANALYSIS_CONCURRENCY=3
QUEUE_TRANSLATION_CONCURRENCY=5
QUEUE_BLOCK_GENERATION_CONCURRENCY=2
QUEUE_PAGE_GENERATION_CONCURRENCY=1

# Job Retry Configuration
QUEUE_MAX_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=2000

# Job Retention (in seconds)
QUEUE_COMPLETED_RETENTION=86400
QUEUE_FAILED_RETENTION=604800


# ==============================================================================
# üìù LOGGING & MONITORING
# ==============================================================================

# Logging Level (debug, info, warn, error)
LOG_LEVEL=info

# Performance Monitoring (optional)
# ENABLE_PERFORMANCE_MONITORING=true
# PERFORMANCE_LOG_SLOW_QUERIES=true
# SLOW_QUERY_THRESHOLD_MS=1000


# ==============================================================================
# üí∞ COST TRACKING & BUDGETS (Optional)
# ==============================================================================

# OpenAI Cost Tracking
# OPENAI_COST_TRACKING_ENABLED=true
# OPENAI_MONTHLY_BUDGET_USD=1000
# OPENAI_ALERT_THRESHOLD_PERCENT=80

# Multi-Model Cost Optimization (Future)
# AUTO_SELECT_CHEAPEST_MODEL=false
# PREFERRED_MODEL_ORDER=gpt-4-turbo,claude-3-opus,gemini-pro


# ==============================================================================
# üéõÔ∏è FEATURE FLAGS
# ==============================================================================

# AI Features
ENABLE_AI_CONTENT_GENERATION=true
ENABLE_AI_BLOCK_GENERATION=true
ENABLE_AI_PAGE_GENERATION=true
ENABLE_AI_SEO_OPTIMIZATION=true
ENABLE_AI_CONTENT_ANALYSIS=true
ENABLE_AI_TRANSLATION=true
ENABLE_AI_IMAGE_GENERATION=true

# Performance Features
ENABLE_ASYNC_PROCESSING=true
ENABLE_SSE_STREAMING=true
ENABLE_SMART_CACHING=true
ENABLE_REQUEST_DEDUPLICATION=true

# Multi-Model Support (Future - Week 5+)
# ENABLE_MULTI_MODEL=false
# ENABLE_MODEL_FALLBACK=false


# ==============================================================================
# üö¢ DEPLOYMENT & HOSTING (Production only)
# ==============================================================================

# Vercel / Netlify / Other Platform
# NEXT_TELEMETRY_DISABLED=1

# ------------------------------------------------------------------------------
# Vercel Blob Storage (REQUIRED for media uploads on Vercel)
# ------------------------------------------------------------------------------
# Get from: https://vercel.com/dashboard/stores
# 1. Go to your project ‚Üí Storage ‚Üí Create Store ‚Üí Blob
# 2. Copy the BLOB_READ_WRITE_TOKEN
# Free tier: 1GB storage, 1GB bandwidth/month
# Note: Falls back to local storage in development if not set
BLOB_READ_WRITE_TOKEN=

# CDN Configuration (if using custom CDN)
# CDN_URL=https://cdn.yourdomain.com

# Asset Optimization
# ENABLE_IMAGE_OPTIMIZATION=true
# IMAGE_QUALITY=85


# ==============================================================================
# üìö DOCUMENTATION & RESOURCES
# ==============================================================================
#
# Setup Guides (in project root):
# - DATABASE_MIGRATION_GUIDE.md - SQLite ‚Üí PostgreSQL migration
# - SECURITY_HARDENING_GUIDE.md - Production security checklist
# - RECAPTCHA_SETUP_GUIDE.md - Spam protection setup
# - UPTIME_MONITORING_GUIDE.md - 24/7 monitoring setup
# - BACKUP_STRATEGY_GUIDE.md - Automated backups
# - DEPLOYMENT.md - Deployment instructions
# - TESTING.md - QA checklist
# - ADMIN_GUIDE.md - Client manual
#
# External Resources:
# - Railway: https://railway.app/ ($5/month PostgreSQL)
# - Supabase: https://supabase.com/ (Free PostgreSQL tier)
# - Resend: https://resend.com/ (Free 100 emails/day)
# - Sentry: https://sentry.io/ (Free 5k errors/month)
# - UptimeRobot: https://uptimerobot.com/ (Free monitoring)
# - Google reCAPTCHA: https://www.google.com/recaptcha/admin/create
# - Google Analytics: https://analytics.google.com/
#
# ==============================================================================
# ‚úÖ SETUP CHECKLIST
# ==============================================================================
#
# Development:
# ‚òê Copy .env.example ‚Üí .env
# ‚òê Generate PAYLOAD_SECRET
# ‚òê Generate PREVIEW_SECRET
# ‚òê Setup OpenAI API key
# ‚òê Install Redis locally: brew install redis
# ‚òê Start Redis: redis-server
# ‚òê Run: npm install
# ‚òê Run: npm run dev
#
# Production (Before Launch):
# ‚òê Setup PostgreSQL (Railway/Supabase)
# ‚òê Update DATABASE_URL
# ‚òê Update server URLs (NEXT_PUBLIC_SERVER_URL)
# ‚òê Setup Vercel Blob Storage (BLOB_READ_WRITE_TOKEN) - REQUIRED for media uploads!
# ‚òê Setup Google Analytics (NEXT_PUBLIC_GA_ID)
# ‚òê Setup Sentry error tracking
# ‚òê Setup Resend email (RESEND_API_KEY)
# ‚òê Get real reCAPTCHA keys (replace test keys)
# ‚òê Setup Upstash Redis for production
# ‚òê Configure UptimeRobot monitoring
# ‚òê Run: npm audit (fix vulnerabilities)
# ‚òê Test all features end-to-end
# ‚òê Deploy to production!
#
# ==============================================================================
